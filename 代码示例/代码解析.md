1. Controller 层 - 输入/输出 DTO
   用途：处理 HTTP 请求/响应，数据验证，格式转换

```
// Controller 输入
public class CreateOrderRequest
{
    public Guid CustomerId { get; set; }
    public string Province { get; set; }
    public string City { get; set; }
    public string District { get; set; }
    public string Street { get; set; }
    public string ZipCode { get; set; }
    public List<OrderItemRequest> Items { get; set; }
}

public class OrderItemRequest
{
    public Guid ProductId { get; set; }
    public string ProductName { get; set; }
    public int Quantity { get; set; }
    public decimal UnitPrice { get; set; }
}

// Controller 输出
public class CreateOrderResponse
{
    public OrderId OrderId { get; set; }
}
```

2. Application 层 - Command

```
// 创建订单命令
public record CreateOrderCommand(
    CustomerId CustomerId,
    Address ShippingAddress,
    List<OrderItem> Items
);

// 修改配送地址命令
public record ChangeShippingAddressCommand(
    OrderId OrderId,
    Address NewAddress
);

// 添加订单项命令
public record AddOrderItemCommand(
    OrderId OrderId,
    ProductId ProductId,
    string ProductName,
    int Quantity,
    Money UnitPrice
);
```

3. Application 层 - Query DTO

```
// 订单详情查询结果
public class OrderDto
{
    public OrderId OrderId { get; set; }
    public CustomerId CustomerId { get; set; }
    public OrderStatus Status { get; set; }
    public Address ShippingAddress { get; set; }
    public Money TotalAmount { get; set; }
    public DateTime CreatedAt { get; set; }
    public List<OrderItemDto> OrderItems { get; set; }
}

// 订单项展示DTO
public class OrderItemDto
{
    public Guid ProductId { get; set; }
    public string ProductName { get; set; }
    public int Quantity { get; set; }
    public decimal UnitPrice { get; set; }
}
```

4. Domain 层 - 值对象/实体

```
// 值对象
public record Address(string Province, string City, string District, string Street, string ZipCode);
public record Money(decimal Amount);
public record CustomerId(Guid Value);
public record ProductId(Guid Value);

// 实体
public class Order : AggregateRoot
{
    public OrderId Id { get; private set; }
    public CustomerId CustomerId { get; private set; }
    public Address ShippingAddress { get; private set; }
    private List<OrderItem> _orderItems = new();
    public IReadOnlyCollection<OrderItem> OrderItems => _orderItems.AsReadOnly();
}
```

# OrderService 就是说这里定义的 Dto 实际上是给 页面返回数据之用的哈

您说得对！让我帮您重新梳理一下这些 DTO 和 Command 的准确用途：

清晰的分类和用途

1. Command（命令） - 应用层输入
   用途：表示一个业务操作，通常对应"写操作"
2. Query DTO（查询数据传输对象） - 应用层输出
   用途：表示查询结果，用于页面展示

# 当前的数据流向：

```
HTTP Request → Controller Request DTO → Application Command → Domain
                                                              ↓
HTTP Response ← Application Query DTO (OrderDto) ← Domain
```
